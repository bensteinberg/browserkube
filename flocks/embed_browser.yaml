name: embed_browser

volumes:
  tmpdir: '/tmp/.X11-unix'
  webarchive: '/webarchive' 

containers:
  - name: pywb
    image: embedsarchive_pywb
    environment:
      INIT_COLLECTION: capture

  - name: browser
    image: oldwebtoday/base-browser
    image_label: wr.name
    set_user_params: true

    environment:
      PROXY_HOST: 'pywb'
      PROXY_PORT: '8080'
      PROXY_CA_URL: 'http://wsgiprox/download/pem'
      PROXY_CA_FILE: '/tmp/proxy-ca.pem'

  - name: embedserver
    image: embedsarchive_driver
    external_network: '${BROWSER_NET}'
    environment:
      BROWSER_HOST: browser
      PROXY_HOST: pywb
      EMBED_HOST: embedserver
      EMBED_PORT: 80

